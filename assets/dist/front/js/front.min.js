(()=>{"use strict";var t=jQuery.noConflict();document.addEventListener("DOMContentLoaded",(function(){t(".wkmp-select2").length&&t(".wkmp-select2").select2(),t("#mp_seller_product_categories").length&&(t("#mp_seller_product_categories").select2(),t(".wc-product-search").select2()),t("#new_zone_locations").length&&t("#new_zone_locations").select2()})),t(window).on("load",(function(){t(".wkmp-add-product-form .select2-container").css("width","100%"),t(".wkmp_nav_tabs a").css("text-decoration","none"),t(".woocommerce-pagination a").css("text-decoration","none"),wp.hasOwnProperty("media")&&(wp.media.model.settings.post.id=0),t(".woocommerce-MyAccount-navigation .woocommerce-MyAccount-navigation-link").length>0&&void 0!==wkmpObj.mkt_tr.separate_dashboard&&t(".woocommerce-MyAccount-navigation-link--"+wkmpObj.mkt_tr.separate_dashboard).length>0&&(t(".woocommerce-MyAccount-navigation-link--"+wkmpObj.mkt_tr.separate_dashboard+" a").attr("href","javascript:void(0);"),t(".woocommerce-MyAccount-navigation-link--"+wkmpObj.mkt_tr.separate_dashboard+" a").on("click",(function(e){e.preventDefault(),t(".woocommerce-MyAccount-navigation-link--separate-dashboard").addClass("loading"),t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_change_frontend_seller_dashboard",change_to:"backend_dashboard",wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){t&&(window.location.href=t.redirect)}})}))),t(document).on("click","#wk_stock_management",(function(){t(this).is(":checked")?(t(".wkmp_profile_input #wk-mp-stock-qty").parent(".wkmp_profile_input").css("display","block"),t(".wkmp_profile_input #_backorders").parent(".wkmp_profile_input").css("display","block"),t(".wkmp_profile_input #wk-mp-stock-threshold").parent(".wkmp_profile_input").css("display","block"),t(".wkmp_profile_input #_stock_status").parent(".wkmp_profile_input").css("display","none")):(t(".wkmp_profile_input #wk-mp-stock-qty").parent(".wkmp_profile_input").css("display","none"),t(".wkmp_profile_input #_backorders").parent(".wkmp_profile_input").css("display","none"),t(".wkmp_profile_input #wk-mp-stock-threshold").parent(".wkmp_profile_input").css("display","none"),t(".wkmp_profile_input #_stock_status").parent(".wkmp_profile_input").css("display","block"))})),t(".mp-avg-rating-box-link").on("click",(function(e){e.stopPropagation(),t(e.target).hasClass("mp-avg-rating-box-link")&&(t(".mp-avg-rating-box").toggle(),t(this).toggleClass("open"))})),t("body").on("click",(function(e){t(".mp-avg-rating-box-link").hasClass("open")&&(t(".mp-avg-rating-box-link").removeClass("open"),t(".mp-avg-rating-box").toggle())})),t("body").on("click",".mp-seller-review-form p.mp-star-rating a",(function(){var e=t(this).data("type"),a=t(this),i=t(this).closest(".mp-star-rating").siblings("#feed-"+e+"-rating"),r=t(this).closest(".mp-star-rating");return i.val(a.data("rate")),a.siblings("a").removeClass("active"),a.addClass("active"),r.addClass("selected"),!1}))})),t((function(){var e;t(".wkmp-role-selector").length&&t(".wkmp-role-selector li").on("click",(function(e){var a=t(this);a.addClass("active").siblings().removeClass("active"),a.children("input[type=radio]").prop("checked",!0),1==a.data("target")?(t(".wkmp-show-fields-if-seller").slideDown(),t(".wkmp-show-fields-if-seller").find(":input").removeAttr("disabled")):(t(".wkmp-show-fields-if-seller").find(":input").attr("disabled","disabled"),t(".wkmp-show-fields-if-seller").slideUp())})),t("#wkmp-shopname").length&&(t("#wkmp-shopname").on("focusout",(function(e){t(this).next(".wkmp-error").remove();var a=t(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");t("#wkmp-shopurl").val(a)})),t("#wkmp-shopurl").on("focusout",(function(){var e=t(this);t(e).next(".wkmp-error").remove();var a=e.val();if(""===a)return!1;t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_check_shop_url",shop_slug:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){!1===e.error?t("#wkmp-shop-url-availability").removeClass("wkmp-text-danger").addClass("wkmp-text-success").text(e.message):t("#wkmp-shop-url-availability").removeClass("wkmp-text-success").addClass("wkmp-text-danger").text(e.message)}})}))),t(".woocommerce-form-register").length&&t("form.woocommerce-form-register").on("submit",(function(e){if(t(".wkmp-error").remove(),"seller"===t("input[name=role]:checked").val()){var a=t(this).find("input"),i=wp.template("wkmp_field_empty");t.each(a,(function(a,r){var n=r.name;"wkmp_seller_signup_term_accept"===n&&(t(r).is(":checked")?t(r).val("yes"):t(r).val("")),!t(r).attr("data-is_optional")&&""===t(r).val()&&(n.indexOf("wkmp_")>-1||"email"===n)&&(e.preventDefault(),"wkmp_seller_signup_term_accept"===n?t(t(r)[0]).parent().after(i()):t(t(r)[0]).after(i()))}))}})),t(".wkmp_nav_tabs li a:not(:first)").addClass("inactive"),t(".wkmp_tab_content .wkmp_tab_pane:not(:first)").addClass("wkmp_hide"),t(".wkmp_nav_tabs li a").on("click",(function(){t(".wkmp_nav_tabs li a").removeClass("active").addClass("inactive"),t(this).removeClass("inactive").addClass("active");var e=t(this).data("id");t(".wkmp_tab_content .wkmp_tab_pane").removeClass("wkmp_show").addClass("wkmp_hide"),t(".wkmp_tab_content ".concat(e)).removeClass("wkmp_hide").addClass("wkmp_show")})),t(".wkmp_nav_tabs li a").each((function(){"yes"===t(this).attr("data-current_tab")&&t(this).trigger("click")})),t(document).on("click","#mp_var_attribute_call",(function(e){e.preventDefault();var a=t("#sell_pr_id").val();t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_marketplace_attributes_variation",product:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},beforeSend:function(){t("#mp-loader").css("display","block")},success:function(e){t("#mp-loader").css("display","none"),t("#mp_attribute_variations").append(e)}})})),t("body").on("click","#wkmp-ask-query",(function(){var e=t(this).data("modal_src");t(e).css("display","block")})),t("body").on("click",".wkmp-popup-modal .modal-footer .close-modal",(function(){t(this).parents(".wkmp-popup-modal").css("display","none")})),t("body").on("click","#wkmp-upload-profile-image",(function(){t("#seller_avatar_file").trigger("click")})),t("body").on("change","#seller_avatar_file",(function(){var e=new FileReader;e.onload=function(e){t(".wkmp_profile_img #wkmp-thumb-image img").attr("src",e.target.result)},e.readAsDataURL(this.files[0])})),t("body").on("click",".wkmp_profile_img .wkmp-remove-profile-image",(function(){var e=t(this).parents(".wkmp_profile_img").find("#wkmp-thumb-image img").data("placeholder-url");t(this).parents(".wkmp_profile_img").find("#wkmp-thumb-image img").attr("src",e),t(this).parents(".wkmp_profile_img").find("#thumbnail_id_avatar").val("")})),t("body").on("click","#wkmp-upload-shop-logo",(function(){t("#seller_shop_logo_file").trigger("click")})),t("body").on("change","#seller_shop_logo_file",(function(){var e=new FileReader;e.onload=function(e){t(".wkmp_profile_logo #wkmp-thumb-image img").attr("src",e.target.result)},e.readAsDataURL(this.files[0])})),t("body").on("click",".wkmp_profile_logo .wkmp-remove-shop-logo",(function(){var e=t(this).parents(".wkmp_profile_logo").find("#wkmp-thumb-image img").data("placeholder-url");t(this).parents(".wkmp_profile_logo").find("#wkmp-thumb-image img").attr("src",e),t(this).parents(".wkmp_profile_logo").find("#thumbnail_id_company_logo").val("")})),t("body").on("click","#wkmp-upload-seller-banner",(function(){t("#wk_mp_shop_banner").trigger("click")})),t("body").on("change","#wk_mp_shop_banner",(function(){var e=new FileReader;e.onload=function(e){t(".wkmp_shop_banner img").attr("src",e.target.result)},e.readAsDataURL(this.files[0])})),t("body").on("click",".wkmp_shop_banner #wkmp-remove-seller-banner",(function(){var e=t(this).parents(".wkmp_shop_banner").find("#wk_seller_banner img").data("placeholder-url");t(this).parents(".wkmp_shop_banner").find("#wk_seller_banner img").attr("src",e),t(this).parents(".wkmp_shop_banner").find("#thumbnail_id_shop_banner").val("")})),t("body").on("click","#wkmp-checked-all",(function(){1==t(this).prop("checked")?t("input[name*='selected']").prop("checked",!0):t("input[name*='selected']").prop("checked",!1)})),t(".wkmp-table-responsive table tbody td input[type=checkbox]").on("click",(function(){var e=t(".wkmp-table-responsive table tbody td input[type=checkbox]:checked").length;t(".wkmp-table-responsive table tbody td input[type=checkbox]").length===e?t("#wkmp-checked-all").prop("checked",!0):t("#wkmp-checked-all").prop("checked",!1)})),t("body").on("click",".wkmp-bulk-delete",(function(){var e=t(this).data("form_id"),a=!1;t("".concat(e," input[type='checkbox']")).each((function(){t(this).is(":checked")&&t(this).val()>0&&(a=!0)})),a?confirm(wkmpObj.delete_product_alert)&&t(e).submit():alert(wkmpObj.none_selected)})),t("body").on("click","#wkmp_delete_single_fav_seller",(function(){confirm(wkmpObj.delete_fav_seller_alert)&&(t(this).closest("tr").children("td:first").find("input[type=checkbox]").prop("checked",!0),t(this).closest("form").submit())})),t("body").on("click","#wkmp-send-notification",(function(){var e=[];if(t("#wkmp-followers-list input[type='checkbox']").each((function(){t(this).is(":checked")&&e.push(t(this).val())})),"on"===e[0]&&e.shift(),e.length>=1){for(var a=0;a<e.length;a++)t("#wkmp-seller-send-notification #wkmp-seller-sendmail-form").append('<input type="hidden" name="customer_ids[]" value="'.concat(e[a],'"/>'));t("#wkmp-seller-send-notification").css("display","block")}else alert(wkmpObj.none_selected)})),t("body").on("click","#wkmp-add-seller-as-favourite",(function(){var e=t(this).find('input[name="wkmp_seller_id"]').val(),a=t(this).find('input[name="wkmp_customer_id"]').val();t(".wkmp-spin-loader").removeClass("wkmp_hide"),t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_add_favourite_seller",seller_id:e,customer_id:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){t(".wkmp-spin-loader").addClass("wkmp_hide"),"added"===e.success&&t("#wkmp-add-seller-as-favourite .dashicons-heart").addClass("wkmp_active_heart"),"removed"===e.success&&t("#wkmp-add-seller-as-favourite .dashicons-heart").removeClass("wkmp_active_heart"),t(".woocommerce .wkmp-confirmation-msg").html(e.message).css("display","block"),setTimeout((function(){t(".woocommerce .wkmp-confirmation-msg").css("display","none")}),3e3)}})})),t("body").on("click",".mp-rating-input .stars a",(function(){var e=t(this).parents(".mp-rating-input"),a=t(this).text();e.find(".stars").find("a").removeClass("active"),e.find(".stars").addClass("selected"),e.find(".stars").find(".star-".concat(a)).addClass("active");var i=e.data("id");t("".concat(i," option:selected")).removeAttr("selected"),t("".concat(i," option:eq(").concat(a,")")).attr("selected","selected")})),t("#mp-update-sale-order").on("change",(function(e){e.preventDefault(),t(window).scrollTop(0),t("body").append("<div class=wk-mp-loader><div class=wk-mp-spinner wk-mp-skeleton></div></div>"),t(".wk-mp-loader").css("display","inline-block"),t("body").css("overflow","hidden"),setTimeout((function(){t("body").css("overflow","auto"),t(".wk-mp-loader").remove()}),1500)})),t("#wkmp-seller-profile #billing-country").on("change",(function(e){var a=t(this).val();t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_get_state_by_country_code",country_code:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){e.success&&t("#wkmp-seller-profile #wkmp_shop_state").replaceWith(e.html)}})})),t(".wk-mp-side-body").on("click",".upload_downloadable_file",(function(a){var i,r=t(this);if(e=r.closest("tr").find("td.file_url input"),a.preventDefault(),i)i.open();else{(i=wp.media.frames.file_frame=wp.media({title:r.data("choose"),button:{text:r.data("update")},multiple:!1})).on("open",(function(){i.state().get("selection")}));var n=wp.media.query();n.filterWithIds=function(t){return _(this.models.filter((function(e){return _.contains(t,e.id)})))},n.filterWithIds([3]),i.on("select",(function(){var t="";i.state().get("selection").map((function(a){return(a=a.toJSON()).url&&(t=a.url),e.val(t).change(),a.id}))})),i.open()}})),t(".select-group .dropdown-togle").on("click",(function(){t(this).parent().toggleClass("open")})),t(".wkmp-order-refund-button").on("click",(function(e){t(".wkmp-order-refund").toggle(),"table-cell"===t(".wkmp-order-refund").css("display")?t(e.target).text("Cancel"):t(e.target).text("Refund")})),t(".refund_line_total")&&t(".refund_line_total").on("change",(function(t){var e=0;document.querySelectorAll(".refund_line_total").forEach((function(t){var a=0;("checkbox"===t.type&&t.checked||"checkbox"!==t.type)&&(a=t.value),e+=a*t.previousElementSibling.value})),document.querySelector("#refund-amount").value=Math.round(100*e)/100})),t(".wkmp-toggle-select").on("change",(function(){var e=t(this).val();"publish"===e?t(".mp-toggle-selected-display").html(wkmpObj.mkt_tr.mkt28).addClass("green"):t(".mp-toggle-selected-display").html(e).removeClass("green")})),t("#wkmp_product_status_checkbox_wrap label").on("click",(function(){t(this).children(".wkmp-toggle-select").trigger("change").prop("checked",!0)}));var a=t("#product_type").val(),i=t("#var_variation_display").val();"variable"===a&&"yes"===i&&t("#edit_product_tab li").eq(6).show(),"external"===a&&t("#edit_product_tab li").eq(5).show(),t(document).on("change","body #product_type",(function(){var e=t("#product_type").val(),a=t("#var_variation_display").val();"variable"===e&&"yes"===a?t("#edit_product_tab li").eq(6).show():t("#edit_product_tab li").eq(6).hide(),"simple"===e?(t("#regularPrice").show(),t("#salePrice").show()):(t("#regularPrice").hide(),t("#salePrice").hide()),"external"===e?t("#edit_product_tab li").eq(5).show():t("#edit_product_tab li").eq(5).hide()})),t("a.mp-toggle-type-cancel").on("click",(function(){t(".mp-toggle-select-type-container").css("display","none")})),t(".mp_value_asc").change((function(){var e=t(this).val(),a=window.location.href+"&"+e;window.location=a})),t("#_ckdownloadable").change((function(){t(".wk-mp-side-body").slideToggle("slow")})),t("#_ckvirtual").change((function(){"none"!==t("#edit_product_tab li").eq(2).css("display")?t("#edit_product_tab li").eq(2).css("display","none"):t("#edit_product_tab li").eq(2).css("display","block")})),t(".wk-mp-side-body").on("click",".downloadable_files a.insert",(function(){return t(this).closest(".downloadable_files").find("tbody").append(t(this).data("row")),!1})),t(".wk-mp-side-body").on("click",".downloadable_files a.delete",(function(){return t(this).closest("tr").remove(),!1})),t(document).on("change",".checkbox_is_virtual",(function(){t(this).parents("tbody").children("tr").eq(0).find(".virtual").slideToggle("fast")})),t(document).on("change",".checkbox_is_downloadable",(function(){t(this).parents("tbody").children("tr").eq(0).find(".downloadable").slideToggle("fast")})),t(document).on("change",".checkbox_manage_stock",(function(){t(this).parents("tbody").children("tr").eq(0).find(".wkmp_stock_status").slideToggle("fast")})),t(".add-mp-product-images").on("click",(function(e){t(this).attr("id");var a,i=t("#product_image_Galary_ids").val(),r="",n=0;t("#wk-mp-product-images").find(".wkmp-error-class").remove(),r=""===i?"":i+",",e.preventDefault(),a||((a=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader_title"),button:{text:t(this).data("uploader_button_text")},multiple:!0})).on("open",(function(){a.state().get("selection")})),wp.media.query().filterWithIds=function(t){return _(this.models.filter((function(e){return _.contains(t,e.id)})))},a.on("select",(function(){a.state().get("selection").map((function(e){if(void 0!==(e=e.toJSON()).sizes)return r=r+e.id+",",t("#handleFileSelectgalaray").append("<img src='"+e.sizes.thumbnail.url+"' width='50' height='50'/>"),e.id;n=1})),n&&t("#wk-mp-product-images").append("<p class=wkmp-error-class"+t(".mp_product_thumb_image.button").data("type-error")+"</p>"),r=r.replace(/,\s*$/,""),t("#product_image_Galary_ids").val(r)}))),a.open()})),t(".mp_product_thumb_image").on("click",(function(e){var a;e.preventDefault(),a||((a=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader_title"),button:{text:t(this).data("uploader_button_text")},multiple:!1})).on("open",(function(){a.state().get("selection")})),wp.media.query().filterWithIds=function(t){return _(this.models.filter((function(e){return _.contains(t,e.id)})))},a.on("select",(function(){a.state().get("selection").map((function(e){if(e=e.toJSON(),t(".mp_product_thumb_image.button").siblings(".wkmp-error-class").remove(),void 0!==e.sizes)return t("#product_thumb_image_mp").val(e.id),t("#mp-product-thumb-img-div").find("img").attr("src",e.sizes.thumbnail.url),t("#mp-product-thumb-img-div").find("span").length<=0&&t("#mp-product-thumb-img-div").append('<span title="'+wkmpObj.mkt_tr.mkt32+'" class="mp-image-remove-icon">x</span>'),e.id;t(".mp_product_thumb_image.button").parent().append("<p class=wkmp-error-class>"+t(".mp_product_thumb_image.button").data("type-error")+"</p>")}))}))),a.open()})),t("#mp-product-thumb-img-div").on("click",".mp-image-remove-icon",(function(){t("#product_thumb_image_mp").val(""),t(this).siblings("img").attr("src",t(this).siblings("img").data("placeholder-url")),t(this).remove()})),t("#edit_product_tab li a:not(:first)").addClass("inactive"),t("#edit_notification_tab li a").length||(t(".wkmp_container").hide(),t(".wkmp_container:first").show());var r=t("#active_product_tab");if(r.val()){var n=r.val();t("#"+n).hasClass("inactive")&&(t("#edit_product_tab li a").addClass("inactive"),t("#"+n).removeClass("inactive"),t(".wkmp_container").hide(),t("#"+t("#"+n).attr("id")+"wk").fadeIn("slow"))}t("#edit_product_tab li a").click((function(){var e=t(this).attr("id");r.val(e),t(this).hasClass("inactive")&&(t("#edit_product_tab li a").addClass("inactive"),t(this).removeClass("inactive"),t(".wkmp_container").hide(),t("#"+e+"wk").fadeIn("slow"))})),t("#edit_notification_tab li a").click((function(){var e=t(this).attr("id");t(this).hasClass("inactive")&&(t("#edit_notification_tab li a").addClass("inactive"),t(this).removeClass("inactive"),t(".wkmp_container").hide(),t("#"+e+"wk").fadeIn("slow"))}));var o=t(".wk_marketplace_attributes"),s=(t(".add-variant-attribute"),t("div.wk_marketplace_attributes > div.wkmp_attributes").length);t(document).on("click",".add-variant-attribute",(function(e){if(e.preventDefault(),"variable"===t("#sell_pr_type").val()){var a="";a+='<div class="wkmp_attributes">',a+='<div class="box-header attribute-remove">',a+='<input type="text" class="mp-attributes-name wkmp_product_input" placeholder="'+wkmpObj.mkt_tr.mkt29+'" name="pro_att['+s+'][name]" value=""/>',a+='<input type="text" class="option wkmp_product_input" title="'+wkmpObj.mkt_tr.mkt30+'" placeholder="'+wkmpObj.mkt_tr.mkt30+'" name="pro_att['+s+'][value]" />',a+='<input type="hidden" name="pro_att['+s+'][position]" class="attribute_position" value="1"/>',a+='<span class="mp_actions">',a+='<button class="mp_attribute_remove btn btn-danger" type="button">'+wkmpObj.mkt_tr.mkt32+"</button>",a+="</span>",a+="</div>",a+='<div class="box-inside clearfix">',a+='<div class="wk-mp-attribute-config">',a+='<div class="wkmp-checkbox-inline">',a+='<input type="checkbox" class="checkbox" name="pro_att['+s+'][is_visible]" id="is_visible_page'+s+'" value="1"/>',a+='<label for="is_visible_page'+s+'">'+wkmpObj.mkt_tr.mkt33+"</label>",a+="</div>",a+='<div class="wkmp-checkbox-inline">',a+='<input type="checkbox" class="checkbox" name="pro_att['+s+'][is_variation]" id="product_att_varition_'+s+'" value="1"/>',a+='<label for="product_att_varition_'+s+'">'+wkmpObj.mkt_tr.mkt34+"</label>",a+="</div>",a+='<input type="hidden" name="pro_att['+s+'][is_taxonomy]" value="0"/>',a+="</div>",a+='<div class="attribute-options"></div>',a+="</div>",a+="</div>",t(o).append(a)}else a="",a+='<div class="wkmp_attributes">',a+='<div class="box-header attribute-remove">',a+='<input type="text" class="mp-attributes-name wkmp_product_input" placeholder="'+wkmpObj.mkt_tr.mkt29+'" name="pro_att['+s+'][name]" value=""/>',a+='<input type="text" class="option wkmp_product_input" title="'+wkmpObj.mkt_tr.mkt30+'" placeholder="'+wkmpObj.mkt_tr.mkt30+'" name="pro_att['+s+'][value]" />',a+='<input type="hidden" name="pro_att['+s+'][position]" class="attribute_position" value="1"/>',a+='<span class="mp_actions">',a+='<button class="mp_attribute_remove btn btn-danger" type="button">'+wkmpObj.mkt_tr.mkt32+"</button>",a+="</span>",a+="</div>",a+='<div class="box-inside clearfix">',a+='<div class="wk-mp-attribute-config">',a+='<div class="wkmp-checkbox-inline">',a+='<input type="checkbox" class="checkbox" name="pro_att['+s+'][is_visible]" id="is_visible_page'+s+'" value="1"/>',a+='<label for="is_visible_page'+s+'">'+wkmpObj.mkt_tr.mkt33+"</label>",a+="</div>",a+='<input type="hidden" name="pro_att['+s+'][is_taxonomy]" value="0"/></div><div class="attribute-options">',a+="</div>",a+="</div>",a+="</div>",t(o).append(a);s++})),t(".wk_marketplace_attributes").on("click",".mp_attribute_remove",(function(e){e.preventDefault(),t(this).parent().parent().parent().remove()})),t("#mp_attribute_variations").on("click",".mp_attribute_remove",(function(e){e.preventDefault(),t(this).parent().parent().remove();var a=t(this).data("var_id");t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_attributes_variation_remove",var_id:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){t("#wkmp_remove_notice_wrap").removeClass("wkmp_hide").html(e.msg),e.success||t("#wkmp_remove_notice_wrap").addClass("woocommerce-error")}})})),t(".wkmp_variation_downloadable_file").on("click",".mp_var_del",(function(){var e=t(this).attr("id");t("#"+e).parent().parent().remove()})),t("#mp_attribute_variations").on("click",".upload_image_button",(function(){var e=t(this).attr("id")+"upload";t("#"+e).trigger("click")})),t(document).on("click","#mp_attribute_variations div.wkmp_variation_downloadable_file .wkmp_downloadable_upload_file",(function(e){e.preventDefault();var a,i="downloadable_upload_file_url_"+t(this).attr("id");if(a)a.open();else{(a=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader_title"),button:{text:t(this).data("uploader_button_text")},multiple:!1})).on("open",(function(){a.state().get("selection")}));var r=wp.media.query();r.filterWithIds=function(t){return _(this.models.filter((function(e){return _.contains(t,e.id)})))},r.filterWithIds([3]),a.on("select",(function(){a.state().get("selection").map((function(e){return e=e.toJSON(),t("#"+i).val(e.url),e.id}))})),a.open()}})),t("a.mp-img-delete_gal").click((function(){t("#"+this.id).parent().remove(),t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_productgallary_image_delete",img_id:this.id,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){t("#product_image_Galary_ids").val(e)}})})),t("#mp_attribute_variations").on("click",".mp_varnew_file",(function(){var e=t(this).attr("id"),a=t("div#variation_downloadable_file_"+e+" > div").length,i="#variation_downloadable_file_"+e;t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_downloadable_file_add",var_id:e,eleme_no:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){t(e).appendTo(i)}})})),t("#add_product_sub").click((function(e){if("submit"===t(this).attr("type")){var a=t("#product_name").val();m=a,a=m=t.trim(m);var i=t("#product_sku").val(),r=t("#regu_price").val(),n=0;0===a.length&&(t("#pro_name_error").html(wkmpObj.mkt_tr.mkt2),n++),void 0!==i&&""!==i&&i.length<3&&(t("#pro_sku_error").css("color","red"),t("#pro_sku_error").html(wkmpObj.mkt_tr.mkt3),n++);var o=t('input[name="product_type"]').val();""!==o&&void 0!==o||(o=t("#product_type").val()),"variable"!==o&&"grouped"!==o&&(p(r)?t("#regl_pr_error").html(""):(t("#regl_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),n++));var s=t("#sale_price").val(),l=parseFloat(t("#regu_price").val()),c=parseFloat(t("#sale_price").val());if(t("#sale_price").val()&&(p(s)?c>l?(t("#sale_pr_error").html(wkmpObj.mkt_tr.mkt5),n++):t("#sale_pr_error").html(""):(t("#sale_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),n++)),t(document).on("blur",".wc_input_decimal, #wk-mp-stock-qty",(function(){var e=t(this).val();t(this).parent(".wrap").children(".wkmp-error-class").remove(),e&&!p(e)&&t(this).parent(".wrap").append('<span class="wkmp-error-class">'+wkmpObj.mkt_tr.i18n_decimal_error+"</span>")})),t(".wkmp_marketplace_variation .wc_input_decimal, .wkmp-add-product-form .wc_input_decimal").each((function(){var e=t(this).val();t(this).parent(".wrap").children(".wkmp-error-class").remove(),e&&!p(e)&&(t(this).parent(".wrap").append('<span class="wkmp-error-class">'+wkmpObj.mkt_tr.i18n_decimal_error+"</span>"),n++)})),n)return!1}var m})),t(document).on("blur",".wc_input_price",(function(){var e=t(this).val();t(this).next(".wkmp-error-class").remove(),e&&!p(e)&&t(this).after('<span class="wkmp-error-class">'+wkmpObj.mkt_tr.i18n_decimal_error+"</span>")})),t(document).on("blur",".wc_input_decimal, #wk-mp-stock-qty",(function(){var e=t(this).val();t(this).parent(".wrap").children(".wkmp-error-class").remove(),e&&!p(e)&&t(this).parent(".wrap").append('<span class="wkmp-error-class">'+wkmpObj.mkt_tr.i18n_decimal_error+"</span>")})),t(document).on("blur","._weight_field .wc_input_decimal, #wk-mp-stock-qty",(function(){var e=t(this).val();t(this).next(".wkmp-error-class").remove(),e&&!p(e)&&t(this).after('<span class="wkmp-error-class">'+wkmpObj.mkt_tr.i18n_decimal_error+"</span>")}));var l=t("#product_sku").val();function p(t){var e=!0;if(""!==t){var a=wkmpObj.mkt_tr.decimal_separator,i=new RegExp("[^-0-9%\\"+a+"]+","gi"),r=new RegExp("[^\\"+a+"]","gi"),n=t.replace(i,"");1<n.replace(r,"").length&&(n=n.replace(r,"")),t!==n&&(e=!1)}return e}t("#product_sku").blur((function(){var e=t("#product_sku").val();t("#pro_sku_error").html(""),e!==l&&function(e){var a=e;if(t("#pro_sku_error").css("color","red"),""!==a){if(!/^[a-z0-9A-Z_-]{1,20}$/.test(a))return t("#pro_sku_error").html("Special character and spaces are not allowed"),!1;if(a.length<3)return t("#pro_sku_error").css("color","red"),t("#pro_sku_error").html(wkmpObj.mkt_tr.mkt3),!1;t("#pro_sku_error").html(""),t("#add_product_sub").attr("disabled","disabled"),t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,dataType:"json",data:{action:"wkmp_product_sku_validation",psku:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){e&&!0===e.success?(t("#pro_sku_error").css("color","green"),t("#pro_sku_error").html(e.message),t("#add_product_sub").removeAttr("disabled")):(t("#pro_sku_error").css("color","red"),t("#pro_sku_error").html(e.message))}})}}(e)})),t(document).on("blur",".wkmp_variable_sku",(function(){var e=t(this).val();t(this).siblings(".wk_variable_sku_err").html(""),t(this).val()!==t(this).attr("placeholder")&&function(e,a){var i=e,r=a;if(t(r).siblings(".wk_variable_sku_err").css("color","red"),""===i)return t(r).siblings(".wk_variable_sku_err").html(wkmpObj.mkt_tr.mkt4),!1;/^[a-z0-9A-Z]{1,20}$/.test(i)&&t(r).siblings(".wk_variable_sku_err").html(""),t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,dataType:"json",data:{action:"wkmp_product_sku_validation",psku:i,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){if(!e||!0!==e.success)return t(r).siblings(".wk_variable_sku_err").css("color","red"),t(r).siblings(".wk_variable_sku_err").html(e.message),!1;t(r).siblings(".wk_variable_sku_err").css("color","green"),t(r).siblings(".wk_variable_sku_err").html(e.message)}})}(e,this)})),t(document).on("keyup",".wkmp_variable_stock",(function(){var e=t(this).val(),a=e;e==e&&(a=e),""!==t(this).val()&&/^\d+(\.\d{1,2})?$/.test(a)?t(this).val(a):(t(this).val(""),a=0)})),t("#product_name").blur((function(){var e=t("#product_name").val();if(_.isEmpty(e))return t("#pro_name_error").html(wkmpObj.mkt_tr.mkt8),!1;t("#pro_name_error").html("")})),t("#regu_price").blur((function(){var e=t("#regu_price").val(),i=t("#product_type");if(a||(i=t("#product-form").find('input[name="product_type"]').val()),"variable"!==i&&"grouped"!==i&&!p(e))return t("#regl_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),!1;t("#regl_pr_error").html("")})),t("#sale_price").blur((function(){var e=t("#sale_price").val(),i=t("#regu_price").val();i=_.isEmpty(i)?i:parseFloat(i);var r=parseFloat(t("#sale_price").val()),n=t("#product_type");if(a||(n=t("#product-form").find('input[name="product_type"]').val()),!_.isEmpty(t("#sale_price").val())&&"variable"!==n&&"grouped"!==n){if(!p(e))return t("#sale_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),!1;if(r>=i)return t("#sale_pr_error").html(wkmpObj.mkt_tr.mkt5),!1;t("#sale_pr_error").html("")}})),t(document).on("blur",".wkmp_variable_sale_price",(function(){var e=t(this).val(),a=parseFloat(t(this).parent().siblings().children(".wkmp_variable_regular_price").val()),i=parseFloat(t(this).val());if(""!==t(this).val()){if(!p(e))return t(this).siblings(".sale_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),!1;if(i>=a)return t(this).siblings(".sale_pr_error").html(wkmpObj.mkt_tr.mkt5),!1;t("#sale_pr_error").html("")}})),t(document).on("focusin","#unused_elm",(function(){t(this).siblings(".live-search-list").slideDown()})),t(document).on("click",".live-search-list li",(function(){t(this).parent(".live-search-list").slideUp();var e=t(this).text().trim(),a=t(this).data("search-term");tag=t('<div class="mp_ship_tags" data-value='+a+">"+e+'<a class="mp_del_tag">x</a></div>'),""===t(this).parent().prev("#mp_set_zone_location").val()?t(this).parent().prev("#mp_set_zone_location").val(t(this).parent().prev("#mp_set_zone_location").val()+a):t(this).parent().prev("#mp_set_zone_location").val(t(this).parent().prev("#mp_set_zone_location").val()+","+a),tag.insertBefore(t(this).parent().siblings("#unused_elm"),t(this).parent().siblings("#unused_elm")),t(this).parent().siblings("#unused_elm").val("")})),t(document).on("click",".mp_del_tag",(function(){var e=t(this).parent().data("value");if(e){var a=t(this).parent().siblings("#mp_set_zone_location").val(),i=e+",",r=","+e;if(-1!==a.indexOf(i))var n=a.replace(e+",","");else n=-1!==a.indexOf(r)?a.replace(","+e,""):a.replace(e,"");t(this).parent().siblings("#mp_set_zone_location").val(n),t(this).parent().remove()}})),t(document).on("keyup",".live-search-box",(function(){var e=t(this).val().toLowerCase().replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}));t(this).siblings(".live-search-list").find("li").each((function(){t(this).is(":contains("+e+")")||e.length<1?t(this).show():t(this).hide()}))})),t("#wkmp-submit-ask-form").on("click",(function(e){e.preventDefault(),t("#wkmp-subject-error").text(""),t("#wkmp-message-error").text("");var a,i="",r=!0;i=t("#wkmp-subject").val(),a=t("#wkmp-message").val(),(i.length<3||i.length>50||!i.match(/^[-_ a-zA-Z0-9]+$/))&&(r=!1,t("#wkmp-subject-error").text(wkmpObj.mkt_tr.mkt40)),(a.length<5||a.length>255)&&(r=!1,t("#wkmp-message-error").text(wkmpObj.mkt_tr.mkt41)),r&&(t("#wkmp-submit-ask-form").prop("disabled",!0),t("#wkmp-seller-sendmail-form").length>0&&t("#wkmp-seller-sendmail-form").submit(),t("#wkmp-seller-query-form").length>0&&t("#wkmp-seller-query-form").submit())})),t(document).on("click","a.upload_var_image_button",(function(e){var a,i=t(this).attr("id"),r="upload_"+i,n="wkmp_variation_product_"+i;e.preventDefault(),a||((a=wp.media.frames.file_frame=wp.media({title:t(this).data("uploader_title"),button:{text:t(this).data("uploader_button_text")},multiple:!1})).on("open",(function(){a.state().get("selection")})),wp.media.query().filterWithIds=function(t){return _(this.models.filter((function(e){return _.contains(t,e.id)})))},a.on("select",(function(){a.state().get("selection").map((function(e){return e=e.toJSON(),t("#"+r).val(e.id),t("#"+n).attr("src",e.sizes.thumbnail.url),e.id}))}))),a.open()})),t(document).ready((function(e){t(".wd-login-title").length>0&&t(".nav.wkmp-role-selector").length>0&&t("input[name=email_2][id=trap]").parent().empty()})),t(document).on("click",".mp_sale_schedule",(function(){t(this).css("display","none"),t(this).siblings(".mp_cancel_sale_schedule").css("display","inline-block"),t(this).parents("tr").siblings(".mp_sale_price_dates_fields").css("display","table-row")})),t(document).on("click",".mp_cancel_sale_schedule",(function(){t(this).css("display","none"),t(this).siblings(".mp_sale_schedule").css("display","inline-block"),t(this).parents("tr").siblings(".mp_sale_price_dates_fields").css("display","none")})),t("body").on("click","#wkmp_product_misc_settings",(function(){t("#wkmp_minimum_order_model").css("display","block")})),t("#wkmp-submit-min-order-amount-update").on("click",(function(e){e.preventDefault();var a=!0,i=t("input[name=_wkmp_minimum_order_amount]");if(i.length>0){var r=t(i).val().trim();parseInt(t(i).attr("data-empty_allow"))<1&&(isNaN(r)||!isNaN(r)&&!(r>0))&&(a=!1,t("#wkmp-amount-error").text(wkmpObj.mkt_tr.mkt42))}var n=t("input[name=_wkmp_max_product_qty_limit]");if(n.length>0){var o=t(n).val();parseInt(t(n).attr("data-empty_allow"))<1&&(isNaN(o)||!isNaN(o)&&!(o>0)||!isNaN(o)&&!function(t){if(!(t=t.trim()))return!1;t=t.replace(/^0+/,"")||"0";var e=Math.floor(Number(t));return e!==1/0&&String(e)===t&&e>=0}(o))&&(a=!1,t("#wkmp-max-qty-limit-error").text(wkmpObj.mkt_tr.mkt47))}a&&(t("#wkmp-amount-error").text(""),t("#wkmp-max-qty-limit-error").text(""),t("form#wkmp-seller-min-order-amount-form").submit())})),t("#wkmp_clear_min_order_amount").on("click",(function(){var e=t("input[name=_wkmp_minimum_order_amount]");parseInt(t(e).attr("data-empty_allow"))>0?(t(e).attr("data-empty_allow",0).attr("readOnly",!1).attr("placeholder",wkmpObj.mkt_tr.mkt43),t(this).text(wkmpObj.mkt_tr.mkt44)):(t(e).attr("data-empty_allow",1).val("").attr("readOnly",!0).attr("placeholder",wkmpObj.mkt_tr.mkt45),t(this).text(wkmpObj.mkt_tr.mkt46),t("#wkmp-amount-error").text(""))})),t("#wkmp_clear_max_qty_limit").on("click",(function(){var e=t("input[name=_wkmp_max_product_qty_limit]");parseInt(t(e).attr("data-empty_allow"))>0?(t(e).attr("data-empty_allow",0).attr("readOnly",!1).attr("placeholder",wkmpObj.mkt_tr.mkt48),t(this).text(wkmpObj.mkt_tr.mkt44)):(t(e).attr("data-empty_allow",1).val("").attr("readOnly",!0).attr("placeholder",wkmpObj.mkt_tr.mkt45),t(this).text(wkmpObj.mkt_tr.mkt46),t("#wkmp-max-qty-limit-error").text(""))})),t("#wk_sold_individual").on("click",(function(){t(this).is(":checked")?t(".wkmp-max-product-qty-limit").hide():t(".wkmp-max-product-qty-limit").show()})),t(".wkmp_delete_seller_product").on("click",(function(){if(confirm(wkmpObj.mkt_tr.fajax0)){var e=t(this),a=e.data("product_id");t(".wkmp-ajax-loader").removeClass("wkmp_hide"),t.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_delete_seller_product",product_id:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(a){!0===a.success?(t(e).closest("tr").remove(),t(".wkmp-ajax-loader").html('<p class="notice success-notice">'+a.message+"</p>"),window.location.reload()):t(".wkmp-ajax-loader").html('<p class="notice error-notice">'+a.message+"</p>"),setTimeout((function(){t(".wkmp-ajax-loader").addClass("wkmp_hide")}),2e3)}})}})),t(".wkmp-trash-shop-follower").on("click",(function(){t(this).closest("tr").find("input[type=checkbox]").attr("checked",!0),t(this).closest("form").submit()})),window.history.replaceState&&window.history.replaceState(null,null,window.location.href)}))})();