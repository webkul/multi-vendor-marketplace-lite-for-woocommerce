(()=>{"use strict";var e=jQuery.noConflict();document.addEventListener("DOMContentLoaded",(function(){e(".wkmp-select2").length&&e(".wkmp-select2").select2()})),e(document).ready((function(){function t(t,a){e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_update_seller_order_status",action_data:t,wkmp_nonce:wkmpObj.ajax.ajaxNonce},beforeSend:function(){a.html('<span class="wkmp-order-status spinner"></span>')},success:function(t){!0===t.success?(a.find(".wkmp-order-status.spinner").replaceWith(t.new_action_html),e(".wkmp-admin-notice.is-dismissible").html("<p>"+t.message+"</p>").removeClass("wkmp-hide")):(a.find(".wkmp-order-status.spinner").replaceWith('<button class="button button-primary" disabled>'+wkmpObj.failed_btn+"</button>"),e(".wkmp-admin-notice.is-dismissible").html("<p>"+t.message+"</p>").removeClass("wkmp-hide"))}})}function a(t){if(e(".__wk_ext-active-tab").length){var s=window.location.href,o=new URLSearchParams(new URL(s).search);o.has("ext_tab")&&e(".__wk_ext-border-color ul li:nth-child("+o.get("ext_tab")+")").trigger("click")}else setTimeout((function(){t<1e4&&a(t+=1e3)}),1e3)}e(".wp-list-table.sellerorders").on("click",".admin-order-pay",(function(){if(window.confirm(wkmpObj.pay_confirm)){var a=e(this).data("id"),s=e(this);t(a,e(s).parent("td"))}})),e(".seller-query-revert").on("click",(function(){e(".wkmp-text-danger").remove();var t=e(this).data("qid"),a=e(this).prev("div").find(".admin_msg_to_seller").val();if((a=a.replace(/\r\n|\r|\n/g,"<br/>")).length<5)return e(this).prev("div").find(".admin_msg_to_seller").before('<div class="wkmp-text-danger">Message should be more than five character</div>'),!1;e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_admin_replied_to_seller",qid:t,reply_message:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){e.success?(alert(e.message),location.reload()):alert(e.message)}})})),e(".return-seller select").length&&e(".return-seller select").select2(),e("select#role").on("change",(function(){"wk_marketplace_seller"===e(this).val()?e(".mp-seller-details").show():e(".mp-seller-details").hide()})),e("#org-name").on("focusout",(function(){var t=e(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");""===t?e("#seller-shop-alert-msg").removeClass("wkmp-text-success").addClass("wkmp-text-danger").text(wkmpObj.shop_name):e("#seller-shop-alert-msg").text(""),e("#seller-shop").val(t)})),e("#seller-shop").on("focusout",(function(){var t=e(this);e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_check_myshop",shop_slug:t.val(),wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){0===t?(e("#seller-shop-alert").removeClass("wkmp-text-success").addClass("wkmp-text-danger"),e("#seller-shop-alert-msg").removeClass("wkmp-text-success").addClass("wkmp-text-danger").text("Not Available")):2===t?(e("#seller-shop-alert").removeClass("wkmp-text-success").addClass("wkmp-text-danger"),e("#seller-shop-alert-msg").removeClass("wkmp-text-success").addClass("wkmp-text-danger").text("Already Exists")):(e("#seller-shop-alert").removeClass("wkmp-text-danger").addClass("wkmp-text-success"),e("#seller-shop-alert-msg").removeClass("wkmp-text-danger").addClass("wkmp-text-success").text("Available"))}})})),e("#wp-admin-bar-wkmp-front-dashboard a").on("click",(function(t){t.preventDefault(),e(this).append('<span class="dashicons dashicons-update loading"></span>'),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_change_seller_dashboard",change_to:"front_dashboard",wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){e&&(window.location.href=e.redirect)}})})),e("input#_sold_individually").on("change",(function(){e(this).is(":checked")?e("._wkmp_max_product_qty_limit_field").hide():e("._wkmp_max_product_qty_limit_field").show()})).trigger("change"),e("select.wkmp_seller_order_action").on("change",(function(){var a=e(this),s=e(a).val();s&&(window.confirm(wkmpObj.order_status_confirm)?t(s,e(a).parent("td")):e(a).prop("selectedIndex",0))})),e(".wkmp_pro_lock").on("click",(function(){e(".wkmp_show_pro_upgrade_poupup, .wkmp-popup-overlay").show()})),e(".wkmp_pro_upgrade_popup_close, .wkmp-popup-overlay, .wkmp_show_pro_upgrade_poupup .upgrade-btns a").on("click",(function(){e(".wkmp_show_pro_upgrade_poupup, .wkmp-popup-overlay").hide()})),e(".__wk_ext-extension-body").length&&setTimeout((function(){a(1e3)}),1e3);var s=e(".wkmp-upgrade-pro-banner-notice").data("admin_id")||"",o="wkmp_pro_banner_notice"+s;"hidden"===wpCookies.get(o)?(e(".wkmp-upgrade-pro-banner-notice").hide(),o="wkmp_pro_toast_notice"+s,"hidden"===wpCookies.get(o)?e(".wkmp-toast-notice.upgrade-to-pro").hide():e(".wkmp-toast-notice.upgrade-to-pro").show(),e(".wkmp-toast-notice.upgrade-to-pro .notice-dismiss").on("click",(function(t){wpCookies.set(o,"hidden",{path:"/"}),e(".wkmp-toast-notice.upgrade-to-pro").hide(),t.preventDefault()}))):e(".wkmp-upgrade-pro-banner-notice").show(),e(".wkmp-upgrade-pro-banner-notice .notice-dismiss").on("click",(function(t){wpCookies.set(o,"hidden",{path:"/"}),e(".wkmp-upgrade-pro-banner-notice").hide(),t.preventDefault()}))}))})();